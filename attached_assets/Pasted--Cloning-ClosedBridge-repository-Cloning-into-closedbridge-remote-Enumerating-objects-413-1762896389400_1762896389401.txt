âœ Cloning ClosedBridge repository...
Cloning into 'closedbridge'...
remote: Enumerating objects: 4139, done.
remote: Counting objects: 100% (625/625), done.
remote: Compressing objects: 100% (324/324), done.
remote: Total 4139 (delta 358), reused 559 (delta 301), pack-reused 3514 (from 2)
Receiving objects: 100% (4139/4139), 31.33 MiB | 27.97 MiB/s, done.
Resolving deltas: 100% (2545/2545), done.
âœ“ Repository cloned
âœ Creating domain configuration helper script...
âœ“ Domain configuration helper script created
âœ Installing Node.js packages...
npm warn config production Use `--omit=dev` instead.
npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm warn deprecated rimraf@2.7.1: Rimraf versions prior to v4 are no longer supported
npm warn deprecated har-validator@5.1.5: this library is no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.
npm warn deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 340 packages in 1m
âœ“ Packages installed
âœ Configuring environment variables...
âœ“ Environment configured with Telegram Bot Token
âœ Configuring Nginx for ClosedBridge...
âœ“ Nginx configured
âœ Optimizing PM2 configuration...
[PM2] Setting changed
Module: pm2
$ pm2 set pm2:sysmonit false
[PM2] Setting changed
Module: pm2-logrotate
$ pm2 set pm2-logrotate:max_size 10M
$ pm2 set pm2-logrotate:retain 3
[PM2] Setting changed
Module: pm2-logrotate
$ pm2 set pm2-logrotate:max_size 10M
$ pm2 set pm2-logrotate:retain 3
âœ Starting ClosedBridge with PM2...
[PM2] Starting /root/closedbridge/server.js in fork_mode (1 instance)
[PM2] Done.
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name            â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ closedbridge    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 32710    â”‚ 0s     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 17.1mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
bash: line 1: $: command not found
root@ubuntu-s-1vcpu-1gb-nyc3-01:~# # Check if the app is actually running
pm2 logs closedbridge --lines 30

# Check Nginx configuration
sudo nginx -t

# Check if SSL certificate was obtained
sudo certbot certificates

# See what Nginx is serving
cat /etc/nginx/sites-available/closedbridge
[TAILING] Tailing last 30 lines for [closedbridge] process (change the value with --lines option)
/root/.pm2/logs/closedbridge-error.log last 30 lines:
/root/.pm2/logs/closedbridge-out.log last 30 lines:
0|closedbr | ğŸ“Š Loaded analytics from file: { totalLogins: 0, successfulLogins: 0, failedLogins: 0 }
0|closedbr | ğŸŒ¤ï¸ Cloudflare configuration loaded and active
0|closedbr | ğŸš€ Microsoft Graph API Backend running on port 3000
0|closedbr | ğŸ“§ API endpoints available at http://localhost:3000/api/
0|closedbr | ğŸŒ Frontend available at http://localhost:3000/
0|closedbr | ğŸ”§ Admin panel available at http://localhost:3000/ad.html
0|closedbr | âœ… Azure credentials configured - Graph API ready
0|closedbr | ğŸ”‘ Generated admin token: admin-g4o705qesh7
0|closedbr | ğŸ’¡ Set ADMIN_TOKEN in .env file for persistent access
0|closedbr | ğŸ¤– Admin token available via Telegram bot - Use /start to access
0|closedbr | 
0|closedbr | âš ï¸ SIGINT received, shutting down gracefully...
0|closedbr | âœ… HTTP server closed
0|closedbr | ğŸ—‘ï¸ Telegram webhook deleted
0|closedbr | âœ… Telegram webhook deleted
0|closedbr | ğŸ‘‹ Process terminated
0|closedbr | âœ… Environment variables loaded from .env file
0|closedbr | ğŸ“‹ Loaded 3 subscription(s) from persistent storage
0|closedbr | ğŸš€ Outlook Notification Bot initialized successfully
0|closedbr | ğŸ¤– Telegram Bot initialized with webhook mode
0|closedbr | ğŸ“Š Loaded analytics from file: { totalLogins: 0, successfulLogins: 0, failedLogins: 0 }
0|closedbr | ğŸŒ¤ï¸ Cloudflare configuration loaded and active
0|closedbr | ğŸš€ Microsoft Graph API Backend running on port 3000
0|closedbr | ğŸ“§ API endpoints available at http://localhost:3000/api/
0|closedbr | ğŸŒ Frontend available at http://localhost:3000/
0|closedbr | ğŸ”§ Admin panel available at http://localhost:3000/ad.html
0|closedbr | âœ… Azure credentials configured - Graph API ready
0|closedbr | ğŸ”‘ Generated admin token: admin-myadwu9fhhs
0|closedbr | ğŸ’¡ Set ADMIN_TOKEN in .env file for persistent access
0|closedbr | ğŸ¤– Admin token available via Telegram bot - Use /start to access

